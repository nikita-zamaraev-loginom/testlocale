# Работа с сертификатами

Процедура получения сертификата и порядок его использования для каждого из внешних веб-сервисов (например - БКИ) описывается в документации, предоставляемой поставщиком услуг соответствующего веб-сервиса.

Используемые в работе *Адаптера* сертификаты могут хранится:

- По пути в файловой системе, указанному в параметре *Путь к сертификату*. Такой способ рекоммендуется использовать для сертификатов, не содержащих закрытый ключ.
- В хранилище сертификатов.

При использовании хранилища необходимо выполнение следующих условий:

- Хранилище сертификатов должно быть доступно для пользователя, из-под которого работает пул приложений *Адаптера* в IIS.

> **Справочно**: хранилище сертификатов *локального компьютера* доступно для всех пользователей. Его редактирование доступно в оснастке `Сертификаты – локальный компьютер` и вызывается командой `mmc certlm.msc`. Хранилище *пользователя* доступно только для определенного пользователя. Его редактирование доступно в оснастке `Сертификаты – текущий пользователь` и вызывается командой `mmc certmgr.msc`.

- Сертификат из хранилища необходимо экспортировать в файл `.CER` в DER-кодировке `X.509` без закрытого ключа,  а в параметре настроек *Адаптера* – *Путь к сертификату* указывается путь к данному файлу. Этот файл выполняет роль ссылки для *Адаптера* на сертификат в хранилище. При обновлении сертификата в хранилище необходимо заново экспортировать новый сертификат из хранилища и обновить путь в параметре *Путь к сертификату*.