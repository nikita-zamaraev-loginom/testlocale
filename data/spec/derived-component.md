# Производный компонент

## Описание

**Производный компонент** — создаваемый пользователем компонент, который может применяться в Сценариях наравне со стандартными, предоставляемыми платформой компонентами. Алгоритм обработки данных, входные и выходные порты производного компонента задаются *базовым узлом*.

В качестве базового узла могут выступать [Подмодель](../processors/control/submodel.md)
 или узел Сценария. Поскольку в Подмодели можно реализовать произвольную логику обработки данных и задать необходимые входные и выходные порты, то на ее основе пользователь имеет возможность создать Производный компонент с универсальной функциональностью, пригодной для многократного использования в различных аналитических задачах. Таким образом, набор средств для реализации различной логики обработки данных не ограничивается стандартными компонентами платформы и может быть расширен самим пользователем. Подобный подход является важным инструментом в реализации структурного подхода в проектировании сложных решений (см. [инструментарий проектирования](../quick-start/design-principles.md)).

Особенностью производного компонента являются его следующие свойства:

* **Наследование** — означает, что изменение базового узла повлечет за собой изменение Производного компонента и, соответственно, всех созданных на базе этого компонента узлов Сценария;
* **Переопределение** — модификация производного узла без изменения Производного компонента, из которого он создан.

Из Производных компонентов создаются *производные узлы*, которые могут находиться в одном из двух состояний:

* Первое состояние они имеют сразу после создания. Они абсолютно идентичны базовому узлу и находятся в состоянии активного слежения за его изменениями. При этом все изменения, осуществленные с базовым узлом, произойдут и с самими производными узлами — на них появится оповещение ![](../images/icons/informer/error_warning.svg) "Базовый узел изменился...". Эти изменения вступят в силу после их повторной активации или переобучения.
* Второе состояние производный узел получает в случае, если пользователь перенастроил его, в результате чего он станет отличным от базового узла. В этом состоянии активное слежение за базовым узлом отключается, и производный узел сохранит новые настройки, *даже если будет изменен базовый узел*. Чтобы принудительно синхронизировать настройки такого производного узла с базовым, следует в его контекстном меню выбрать пункт "Восстановить исходную конфигурацию узла".

Перечень запрещенных изменений при переопределении производного узла:

 | Наследуемый узел | Объект | Список запрещенных операций |
 | :-------- |:-------- | :-------- |
 | Все узлы | Столбцы и переменные во входных и выходных портах | <ul> <li>Удаление</li> <li>Изменение типа данных</li> <li>Изменение имени</li> </ul> |
 | Подмодель | Узлы Подмодели | <ul> <li>Удаление, объединение в Подмодель</li> <li>Развертывание Подмодели</li> <li>Замена узла подключения отнаследованным узлом</li> </ul>|
 |Подмодель | Связи между узлами подмодели | <ul><li>Удаление, изменение исходного и целевого порта</li></ul> |
 | | Подключения | <ul><li>Удаление</li></ul> |
 | | Производные компоненты |<ul><li>Удаление, замена базового узла</li></ul> |
 | Узлы с переменным числом портов, в том числе Подмодель | Входные и выходные порты | <ul><li>Удаление</li> <li>Изменение типа</li> <li>Изменение имени</li></ul> |

## Создание и настройка производного компонента

Для создания производного компонента необходимо выбрать базовый узел (Подмодель) и в его контекстном меню выбрать пункт ![](../images/icons/toolbar-controls/derive-node_default.svg) "Создать производный компонент". Та же команда доступна на панели инструментов области построения Сценариев.

Откроется окно "Настройка производного компонента", где определяются:

* **Метка** — наименование производного компонента;
* **Описание** — дополнительная информация по компоненту;
* **Область видимости** — доступность Производного компонента на разных уровнях Пакета, задается радиокнопкой:
  * Закрытый (доступен только внутри текущего Модуля);
  * Частично закрытый (доступен только внутри текущего Модуля и его Подмоделей);
  * Внутренний (доступен только внутри текущего Пакета);
  * Открытый (доступен во всех пакетах) — для использования Производного компонента из другого пакета необходимо создать Ссылку на Пакет (см. [модификатор доступа](./access-modifier.md)), в котором Производный компонент был создан.

После сохранения настроек Производный компонент будет доступен в панели "Производные компоненты". Для создания на его основе узла Сценария его необходимо перенести в область построения Сценария. На созданных таким образом узлах отображается кнопка ![](../images/icons/toolbar-controls/show-derived-nodes_default.svg)
"Показать базовый узел", которая позволяет найти базовый узел (в случае, если он расположен в пределах текущей области построения Сценария).

Отредактировать настройки созданных в пакете производных компонентов можно в разделе Компоненты панели навигации: Панель Навигация -> Пакеты -> Текущий пакет -> Компоненты.
